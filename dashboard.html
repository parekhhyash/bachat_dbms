{% extends 'base.html' %}
{% block nav_center %}<a href="/app/dashboard" class="hover:underline">Dashboard</a><a href="/app/analytics" class="hover:underline">Analytics</a><a href="/app/transactions" class="hover:underline">Transactions</a>{% endblock %}
{% block nav_right %}<a href="/logout" class="px-3 py-1 border rounded text-sm">Logout</a>{% endblock %}
{% block content %}
<h2 class="text-2xl font-semibold mb-4">Dashboard</h2>
<div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
  <div class="p-4 border rounded">
    <div class="text-sm text-gray-500">Monthly Spent</div>
    <div class="text-xl font-medium">₹{{ '%.2f'|format(monthly_spent) }}</div>
  </div>
  <div class="p-4 border rounded">
    <div class="text-sm text-gray-500">Budget</div>
    <div class="text-xl font-medium">{% if budget %}₹{{ '%.2f'|format(budget) }}{% else %}—{% endif %}</div>
    {% if not budget %}
    <form action="/app/set_budget" method="POST" class="mt-3 flex gap-2">
      <input name="budget" placeholder="Set budget" required class="border px-2 py-1 rounded w-full" />
      <button class="px-3 py-1 bg-black text-white rounded">Set</button>
    </form>
    {% endif %}
  </div>
  <div class="p-4 border rounded">
    <div class="text-sm text-gray-500">Remaining</div>
    <div class="text-xl font-medium">{% if remaining is not none %}₹{{ '%.2f'|format(remaining) }}{% else %}—{% endif %}</div>
  </div>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
  <div class="p-4 border rounded">
    <div class="text-sm text-gray-500">Highest day</div>
    <div class="text-lg">{{ highest_day[0] or '—' }}</div>
    <div class="text-sm text-gray-600">₹{{ '%.2f'|format(highest_day[1] or 0) }}</div>
  </div>
  <div class="p-4 border rounded">
    <div class="text-sm text-gray-500">Top category</div>
    <div class="text-lg">{{ highest_cat[0] or '—' }}</div>
    <div class="text-sm text-gray-600">₹{{ '%.2f'|format(highest_cat[1] or 0) }}</div>
  </div>
</div>

<section class="p-4 border rounded">
  <h3 class="font-medium mb-3">Add transaction</h3>
  <form action="/app/add_transaction" method="POST" class="grid grid-cols-1 md:grid-cols-5 gap-2 items-end">
    <input name="amount" type="number" step="0.01" placeholder="Amount" required class="border px-2 py-1 rounded" />
    <input name="category" placeholder="Category (e.g. Food)" required class="border px-2 py-1 rounded" />
    <input name="date" type="date" required class="border px-2 py-1 rounded" />
    <input name="note" placeholder="Note" class="border px-2 py-1 rounded" />
    <div><button class="px-4 py-2 bg-black text-white rounded" type="submit">Add</button></div>
  </form>
</section>
{% endblock %}
